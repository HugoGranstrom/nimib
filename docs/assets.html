<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>assets.nim</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>üê≥</text></svg>">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link rel='stylesheet' href='https://unpkg.com/normalize.css/'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
  <link rel='stylesheet' href='static/atom-one-light.css'>
  <script src="static/highlight.nim.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  </head>
<body>
<main>
<h1>Assets</h1>
<pre><code class="nim">import
  strformat, strutils</code></pre>
<p>List of assets that should be available in order to be able to create
a working html document starting from a single nim file and nothing else:</p>
<pre><code class="nim">let assetFiles: seq[(string, RelativeFile)] = @[
    ("highlightJs", "./static/highlight.nim.js".RelativeFile),
    ("highlightCss", "./static/atom-one-light.css".RelativeFile),
    ("doc", "./templates/doc.mustache".RelativeFile),
    ("head", "./templates/head.mustache".RelativeFile)]</code></pre>
<p>In order to have them available from the library I need to generate
the <code>nimib\assets.nim</code> module reading from this files.</p>
<pre><code class="nim">let assetModuleFile = "../src/nimib/assets.nim".RelativeFile
let
  tripleQuote = "\"\"\""
  tripleQuoteReplacement = tripleQuote & &" & \"\\\"\\\"\\\"\" & " &
      tripleQuote
var assetModuleContent: string
for (name, file) in assetFiles:
  let content = file.read.replace(tripleQuote, tripleQuoteReplacement)
  if tripleQuote in content:
    echo "ERROR tripleQuote in ", name
  assetModuleContent.add fmt"""let {name}* = {tripleQuote}
{content}{tripleQuote}
"""
assetModuleFile.write assetModuleContent</code></pre>
<pre><samp>ERROR tripleQuote in highlightJs</samp></pre>

</main>
</body>
</html>